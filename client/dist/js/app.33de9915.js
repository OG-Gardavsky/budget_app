(function(e){function t(t){for(var r,c,s=t[0],i=t[1],u=t[2],d=0,m=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&m.push(a[c][0]),a[c]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);l&&l(t);while(m.length)m.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var i=n[s];0!==a[i]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={app:0},o=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=i;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"21bb":function(e,t,n){"use strict";n("2dad")},"2dad":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],c=(n("5c0b"),n("2877")),s={},i=Object(c["a"])(s,a,o,!1,null,null,null),u=i.exports,l=n("8c4f"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"mainContent"}},[n("h1",[e._v("Log in, please.")]),n("LoginPage",{on:{"on-login":e.onLogin}})],1)},m=[],f=n("1da1"),p=(n("96cf"),n("d3b7"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("md-field",[n("label",[e._v("Enter your email")]),n("md-input",{attrs:{type:"email",placeholder:"Email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),n("md-field",[n("label",[e._v("Enter you password")]),n("md-input",{attrs:{type:"password",placeholder:"Password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("md-button",{staticClass:"md-raised md-primary",on:{click:e.onLogin}},[e._v("Log in")])],1)}),h=[],g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{on:{click:e.onClick}},[e._v(e._s(e.textOfButton))])},v=[],b={name:"customButton",props:{textOfButton:String},methods:{onClick:function(){this.$emit("on-click")}}},w=b,x=(n("dd03"),Object(c["a"])(w,g,v,!1,null,"2f3ce2fc",null)),_=x.exports,y={name:"LoginPage",components:{CustomButton:_},data:function(){return{email:"",password:""}},methods:{onLogin:function(e){if(e.preventDefault(),""===this.email||""===this.password)return alert("fill email and password");var t={email:this.email,password:this.password};this.$emit("on-login",t)}}},k=y,O=(n("57de"),Object(c["a"])(k,p,h,!1,null,"2ce6a204",null)),I=O.exports,A={name:"Login",components:{LoginPage:I},data:function(){return{userInfo:{}}},methods:{onLogin:function(e){return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("api/users/login",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(e)});case 2:if(n=t.sent,200!==n.status){t.next=12;break}return t.next=6,n.json();case 6:return r=t.sent,localStorage.setItem("userToken",r.token),t.next=10,Y.push("home");case 10:t.next=13;break;case 12:alert("unable to login");case 13:case"end":return t.stop()}}),t)})))()},getUserInfo:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("api/users",{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("userToken")}});case 2:return n=t.sent,t.next=5,n.json();case 5:e.userInfo=t.sent;case 6:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!localStorage.getItem("userToken")){t.next=6;break}return t.next=3,e.getUserInfo();case 3:if(e.userInfo.hasOwnProperty("error")){t.next=6;break}return t.next=6,Y.push("home");case 6:case"end":return t.stop()}}),t)})))()}},T=A,j=Object(c["a"])(T,d,m,!1,null,null,null),R=j.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"home"},[n("Header"),e.displayH2?n("h2",[e._v("Welcome to budget app, "+e._s(e.userInfo.name))]):e._e()],1),n("div",{attrs:{id:"accounts"}},e._l(e.accountsBalance,(function(t){return n("span",{key:t.accountId,on:{click:function(n){return e.showTransactionsOfSpecificAccount(t)}}},[n("p",[e._v(e._s(t.accountName))]),n("p",[e._v(e._s(t.balance)+" "+e._s(t.currency))])])})),0),n("md-button",{staticClass:"md-raised md-primary",on:{click:e.refresh}},[e._v("Refresh")]),n("md-button",{staticClass:"md-raised md-primary",on:{click:e.showAddTranscaction}},[e._v("Add transaction")]),n("modal-window",{attrs:{"show-dialog":e.showDialog},on:{"on-closeModal":e.closeAddTransaction,"on-save":e.refresh}}),n("div",{attrs:{id:"transactions"}},e._l(e.transactions,(function(t){return n("div",{key:t._id},[n("p",[e._v(" "+e._s(t.name)+" - "+e._s(t.subtype)+" : "+e._s(t.amount)+" "+e._s(t.currency)+" ")]),n("md-button",{staticClass:"md-primary",on:{click:function(n){return e.deleteTransaction(t)}}},[e._v("del")])],1)})),0)],1)},C=[],B=(n("25f0"),n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Budget app")]),n("md-button",{staticClass:"md-primary md-raised",on:{click:e.logOut}},[e._v("log out")])],1)}),E=[],P={name:"Header",components:{CustomButton:_},methods:{logOut:function(){return Object(f["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=window.confirm("Are you sure you want to log out?"),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,fetch("api/users/logout",{method:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("userToken")}});case 5:n=e.sent,200!==n.status&&401!==n.status||(localStorage.removeItem("userToken"),Y.push("/"));case 7:case"end":return e.stop()}}),e)})))()}}},D=P,L=(n("992a"),Object(c["a"])(D,B,E,!1,null,"a92da1b6",null)),$=L.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("md-dialog",{attrs:{"md-active":e.showDialog},on:{"update:mdActive":function(t){e.showDialog=t},"update:md-active":function(t){e.showDialog=t}}},[n("md-dialog-title",[e._v("Add transaction")]),n("md-tabs",{attrs:{"md-dynamic-height":""}},[n("md-tab",{attrs:{"md-label":"basic"}},[n("md-field",[n("label",[e._v("Transaction Type")]),n("md-select",{attrs:{required:""},model:{value:e.transactionType,callback:function(t){e.transactionType=t},expression:"transactionType"}},[n("md-option",{attrs:{value:"income"}},[e._v("Income")]),n("md-option",{attrs:{value:"expense"}},[e._v("Expense")])],1)],1),n("md-field",[n("label",[e._v("Category")]),n("md-select",{attrs:{required:""},model:{value:e.categoryId,callback:function(t){e.categoryId=t},expression:"categoryId"}},e._l(e.listOfCategories,(function(t){return n("md-option",{attrs:{value:t._id.toString()}},[e._v(e._s(t.name))])})),1)],1),n("md-field",[n("label",[e._v("Account")]),n("md-select",{attrs:{required:""},model:{value:e.accountId,callback:function(t){e.accountId=t},expression:"accountId"}},e._l(e.listOfAccounts,(function(t){return n("md-option",{attrs:{value:t._id.toString()}},[e._v(e._s(t.name))])})),1)],1),n("md-field",[n("label",[e._v("Enter amount of transaction")]),n("md-input",{attrs:{type:"number",placeholder:"Amount",required:""},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}})],1),n("md-field",[n("label",[e._v("Currency (optional)")]),n("md-select",{model:{value:e.currency,callback:function(t){e.currency=t},expression:"currency"}},[n("md-option",{attrs:{value:"CZK"}},[e._v("CZK")]),n("md-option",{attrs:{value:"USD"}},[e._v("USD")]),n("md-option",{attrs:{value:"EUR"}},[e._v("EUR")])],1)],1),n("md-field",[n("label",[e._v("Enter name of transaction (optional)")]),n("md-input",{attrs:{type:"text",placeholder:"Name(optional)"},model:{value:e.transactionName,callback:function(t){e.transactionName=t},expression:"transactionName"}})],1),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:e.closeDialog}},[e._v("Close")]),n("md-button",{staticClass:"md-primary md-raised",on:{click:e.createBasicTransaction}},[e._v("Add transaction")])],1)],1),n("md-tab",{attrs:{"md-label":"transfer"}},[n("md-field",[n("label",[e._v("Enter amount of transaction")]),n("md-input",{attrs:{type:"number",placeholder:"Amount",required:""},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}})],1),n("md-field",[n("label",[e._v("From Account:")]),n("md-select",{attrs:{required:""},model:{value:e.givingAcountId,callback:function(t){e.givingAcountId=t},expression:"givingAcountId"}},e._l(e.listOfAccounts,(function(t){return n("md-option",{attrs:{value:t._id.toString()}},[e._v(e._s(t.name))])})),1)],1),n("md-field",[n("label",[e._v("To Account:")]),n("md-select",{attrs:{required:""},model:{value:e.receivingAcountId,callback:function(t){e.receivingAcountId=t},expression:"receivingAcountId"}},e._l(e.listOfAccounts,(function(t){return n("md-option",{attrs:{value:t._id.toString()}},[e._v(e._s(t.name))])})),1)],1),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:e.closeDialog}},[e._v("Close")]),n("md-button",{staticClass:"md-primary md-raised",on:{click:e.createTransfer}},[e._v("Add transaction")])],1)],1)],1)],1)],1)},z=[],M={name:"ModalWindow",props:{showDialog:Boolean},data:function(){return{listOfCategories:[],listOfAccounts:[],transactionType:null,transactionName:null,amount:null,currency:null,categoryId:null,accountId:null,givingAcountId:null,receivingAcountId:null}},methods:{createTransfer:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={amount:e.amount,givingAcountId:e.givingAcountId,receivingAcountId:e.receivingAcountId},t.next=3,e.createTransaction(n,"transfer");case 3:case"end":return t.stop()}}),t)})))()},createBasicTransaction:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={type:e.transactionType,amount:e.amount,categoryId:e.categoryId,accountId:e.accountId},null!==e.transactionName&&(n.name=e.transactionName),null!==e.currency&&(n.currency=e.currency),t.next=5,e.createTransaction(n,"basic");case 5:case"end":return t.stop()}}),t)})))()},createTransaction:function(e,t){var n=this;return Object(f["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch("api/transactions/"+t,{method:"POST",headers:{"Content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("userToken")},body:JSON.stringify(e)});case 2:a=r.sent,201===a.status&&(n.$emit("on-save"),n.$emit("on-closeModal"),n.clearVariables());case 4:case"end":return r.stop()}}),r)})))()},clearVariables:function(){this.transactionType=null,this.transactionName=null,this.amount=null,this.currency=null,this.categoryId=null,this.accountId=null,this.givingAcountId=null,this.receivingAcountId=null},closeDialog:function(){this.$emit("on-closeModal")},getListOfAccounts:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("api/accounts",{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("userToken")}});case 2:return n=e.sent,e.next=5,n.json();case 5:t.listOfAccounts=e.sent;case 6:case"end":return e.stop()}}),e)})))()},getListOfCategories:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("api/categories",{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("userToken")}});case 2:return n=e.sent,e.next=5,n.json();case 5:t.listOfCategories=e.sent;case 6:case"end":return e.stop()}}),e)})))()}},created:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getListOfAccounts();case 2:return t.next=4,e.getListOfCategories();case 4:case"end":return t.stop()}}),t)})))()}},U=M,q=Object(c["a"])(U,N,z,!1,null,"df666b4c",null),G=q.exports,H={name:"Home",components:{ModalWindow:G,CustomButton:_,Header:$},data:function(){return{accountsBalance:[],transactions:[],userInfo:{},displayH2:!0,showDialog:!1}},methods:{showAddTranscaction:function(){this.showDialog=!0},closeAddTransaction:function(){this.showDialog=!1},showTransactionsOfSpecificAccount:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,fetch("api/accounts/id:"+e.accountId.toString()+"/transactions",{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("userToken")}});case 2:return r=n.sent,t.transactions=[],n.next=6,r.json();case 6:t.transactions=n.sent;case 7:case"end":return n.stop()}}),n)})))()},deleteTransaction:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=window.confirm("Are you sure you want to delete transation with name "+e.name),r){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,fetch("api/transactions/id:"+e._id,{method:"Delete",headers:{Authorization:"Bearer "+localStorage.getItem("userToken")}});case 5:return n.sent,n.next=8,t.refresh();case 8:case"end":return n.stop()}}),n)})))()},refresh:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.displayH2=!1,t.next=3,e.checkCredentials();case 3:if(n=t.sent,0===n){t.next=6;break}return t.abrupt("return");case 6:e.displayFinancialInfo();case 7:case"end":return t.stop()}}),t)})))()},displayFinancialInfo:function(){this.showTransactionsOfAllAccounts(),this.showBalanceOfAccounts()},showBalanceOfAccounts:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("api/accounts/balance",{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("userToken")}});case 2:return n=t.sent,t.next=5,n.json();case 5:e.accountsBalance=t.sent;case 6:case"end":return t.stop()}}),t)})))()},showTransactionsOfAllAccounts:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("api/transactions",{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("userToken")}});case 2:return n=t.sent,t.next=5,n.json();case 5:e.transactions=t.sent;case 6:case"end":return t.stop()}}),t)})))()},getUserInfo:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("api/users",{method:"GET",headers:{Authorization:"Bearer "+localStorage.getItem("userToken")}});case 2:return n=t.sent,t.next=5,n.json();case 5:e.userInfo=t.sent;case 6:case"end":return t.stop()}}),t)})))()},checkCredentials:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!==localStorage.getItem("userToken")){t.next=3;break}return alert("You are not authenticated, please logged in"),t.abrupt("return",Y.push("/"));case 3:return t.next=5,e.getUserInfo();case 5:if(!e.userInfo.hasOwnProperty("error")){t.next=9;break}return localStorage.removeItem("userToken"),alert("You are not authenticated, please logged in"),t.abrupt("return",Y.push("/"));case 9:return t.abrupt("return",0);case 10:case"end":return t.stop()}}),t)})))()}},created:function(){this.checkCredentials(),this.displayFinancialInfo()}},F=H,J=(n("21bb"),Object(c["a"])(F,S,C,!1,null,null,null)),W=J.exports;r["default"].use(l["a"]);var K=[{path:"/",name:"Login",component:R},{path:"/home",name:"home",component:W}],V=new l["a"]({routes:K}),Y=V,Z=n("43f9"),Q=n.n(Z);n("51de"),n("e094");r["default"].use(Q.a),r["default"].config.productionTip=!1,new r["default"]({router:Y,render:function(e){return e(u)}}).$mount("#app")},"57de":function(e,t,n){"use strict";n("ec26")},"5c0b":function(e,t,n){"use strict";n("9c0c")},"98ab":function(e,t,n){},"992a":function(e,t,n){"use strict";n("98ab")},"9c0c":function(e,t,n){},ccf2:function(e,t,n){},dd03:function(e,t,n){"use strict";n("ccf2")},ec26:function(e,t,n){}});
//# sourceMappingURL=app.33de9915.js.map